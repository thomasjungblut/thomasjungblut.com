{"componentChunkName":"component---src-templates-blog-post-js","path":"/blogger/greatest-common-divisor-using-f/","result":{"data":{"site":{"siteMetadata":{"title":"Coding with Thomas"}},"markdownRemark":{"id":"8b9d3498-0e14-53c3-8831-909a7b48652d","excerpt":"Hey guys, I played with F# on the weekend. Since I’m working at Microsoft now and mainly working with C#, I thought F# would be a nice counterpart to my Scala…","html":"<p>Hey guys,</p>\n<p>I played with F# on the weekend. Since I’m working at Microsoft now and mainly working with C#, I thought F# would be a nice counterpart to my Scala work in the past.</p>\n<p><strong>A few personal updates</strong></p>\n<p>The start at Microsoft was quite a lot of work until now and I find less time and motivation in coding much in the evening. You can mainly see this in the commit activity of <a href=\"https://github.com/thomasjungblut/thomasjungblut-common\">my common library on Github</a> which looks like this:</p>\n<p><a href=\"http://4.bp.blogspot.com/-Y1CWed9WADw/U0MChs1BgXI/AAAAAAAACfs/uvBDPMYpwYg/s1600/commit_activity.PNG\"><img src=\"http://4.bp.blogspot.com/-Y1CWed9WADw/U0MChs1BgXI/AAAAAAAACfs/uvBDPMYpwYg/s1600/commit_activity.PNG\" alt=\"\"></a></p>\n<p>Flatline since christmas… Not very proud of it, due to my relocation to London I was two months without my development desktop PC, in addition, context-switching between C# and Java isn’t easy. Personally I find it very hard to go back to Java, as I’m missing a ton of functionality from C#! But I promise that I will find my way back, especially when it comes to awesome machine learning algorithms.</p>\n<p><strong>Back to the topic</strong></p>\n<p>So like most of the time, I was lurking around at Stackoverflow and found a poor guy using a <a href=\"http://stackoverflow.com/questions/22920894/java-program-not-executing-code\">Java 8 lambda to make the greatest common divisor working</a>. Besides that his algorithm is quite strange and by the time you read this, the question is likely to be deleted, I find a quite interesting idea to practice my (still poor) weekend’s F# skills.</p>\n<p>Just a few words about the <a href=\"http://en.wikipedia.org/wiki/Greatest_common_divisor\">greatest common divisor definition</a>, given two integers, we want the largest number that divides both without a remainder.</p>\n<p>I chose the simplest set theory approach, which is just calculating two sets of divisors and intersecting them. Then I choose the maximum from the intersection.</p>\n<p>Here is what I came up in F# (even using the pipelining operators!):</p>\n<div class=\"gatsby-highlight\" data-language=\"fsharp\"><pre class=\"language-fsharp\"><code class=\"language-fsharp\"><span class=\"token keyword\">let</span> gcd <span class=\"token operator\">=</span> <span class=\"token keyword\">fun</span> <span class=\"token punctuation\">(</span>a<span class=\"token punctuation\">,</span> b<span class=\"token punctuation\">)</span> <span class=\"token operator\">-></span>   \n  <span class=\"token keyword\">let</span> set1 <span class=\"token operator\">=</span> Set<span class=\"token punctuation\">.</span>ofList \\<span class=\"token punctuation\">[</span> <span class=\"token number\">1</span> <span class=\"token operator\">..</span> a \\<span class=\"token punctuation\">]</span>  \n          <span class=\"token operator\">|></span> Set<span class=\"token punctuation\">.</span>filter <span class=\"token punctuation\">(</span><span class=\"token keyword\">fun</span> x <span class=\"token operator\">-></span> a <span class=\"token operator\">%</span> x <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span>  \n  <span class=\"token keyword\">let</span> inter <span class=\"token operator\">=</span> Set<span class=\"token punctuation\">.</span>ofList \\<span class=\"token punctuation\">[</span> <span class=\"token number\">1</span> <span class=\"token operator\">..</span> b \\<span class=\"token punctuation\">]</span>  \n          <span class=\"token operator\">|></span> Set<span class=\"token punctuation\">.</span>filter <span class=\"token punctuation\">(</span><span class=\"token keyword\">fun</span> x <span class=\"token operator\">-></span> b <span class=\"token operator\">%</span> x <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span>  \n          <span class=\"token operator\">|></span> Set<span class=\"token punctuation\">.</span>intersect set1  \n  inter<span class=\"token punctuation\">.</span>MaximumElement     </code></pre></div>\n<p>Rather easy binding of a function, not much to say here.<br>\nSmall obligatory test:</p>\n<div class=\"gatsby-highlight\" data-language=\"fsharp\"><pre class=\"language-fsharp\"><code class=\"language-fsharp\"><span class=\"token keyword\">let</span> a <span class=\"token operator\">=</span> <span class=\"token number\">12</span>  \n<span class=\"token keyword\">let</span> b <span class=\"token operator\">=</span> <span class=\"token number\">8</span>  \nConsole<span class=\"token punctuation\">.</span><span class=\"token function\">WriteLine</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"GCD: {0}\"</span><span class=\"token punctuation\">,</span> <span class=\"token function\">gcd</span><span class=\"token punctuation\">(</span>a<span class=\"token punctuation\">,</span> b<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>  \n<span class=\"token comment\">// yields to result  </span>\n<span class=\"token comment\">// GCD: 4</span></code></pre></div>\n<p><strong>How is the language so far?</strong></p>\n<p>I found F# until now quite succinct, especially compared to C#. .NET integrates very nicely, too.<br>\nHowever, sometimes the type system makes me want to punch a wall.<br>\nBut the most disappointing experience so far: the .fs file that contains your main method needs to be the last one in the project’s solution. Yes you heard correctly, it must be on the lowest possible list entry in the project solution list.</p>\n<p><strong>How dumb is that?!</strong> Obviously, this was hiding behind a MSFT typical error message:</p>\n<blockquote>\n<p>error FS0039: The namespace or module ‘_my_namespace’ is not defined</p>\n</blockquote>\n<p>That cost me a few hours to figure out.</p>\n<p><strong>Complexity</strong></p>\n<p>Let’s talk about the complexity a bit. So <a href=\"http://en.wikibooks.org/wiki/F_Sharp_Programming/Sets_and_Maps\">as far as I read here</a>, a <em>Set</em> in F# is unordered, most likely to be a <em>HashSet.</em> Thus constructing and filtering both sets is O(A) respectively O(B), the intersection of two unordered sets is linear in time as well. So what we will end up is something like this:</p>\n<blockquote>\n<p> 2 * (O(A) + O(B)) + O(A+B) = O(n)</p>\n</blockquote>\n<p>Still linear time, but very bad constants. Also the space complexity is rather bad, it is linear as well, as we are creating two quite large sets.</p>\n<p>But hey! It is just a naive method to show off my new aquired F# knowledge.</p>\n<p>Thanks for reading, see you next time with a more interesting Big Data topic I hope,<br>\nThomas</p>","frontmatter":{"title":"Greatest common divisor using F#","date":"7th April 2014","description":null},"tableOfContents":"","timeToRead":2},"previous":{"fields":{"slug":"/blogger/wiring-services-together-using-actor/"},"frontmatter":{"title":"Wiring services together using the actor model"}},"next":{"fields":{"slug":"/blogger/stochastic-logistic-regression-in-f/"},"frontmatter":{"title":"Stochastic Logistic Regression in F#"}}},"pageContext":{"id":"8b9d3498-0e14-53c3-8831-909a7b48652d","previousPostId":"48213e99-873d-5b52-8ef1-89c762d76547","nextPostId":"21a9784d-ad71-5215-a660-37236303f25c"}},"staticQueryHashes":["2270107033","2841359383"],"slicesMap":{}}